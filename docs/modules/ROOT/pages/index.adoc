[#spring-boot-config-json-schema-generator]
= Spring Boot Config JSON Schema Generator

This starter generates JSON Schema from your @ConfigurationProperties and Spring Boot configuration metadata. Use it for:
- IDE validation and autocompletion in YAML/Properties
- CI/CD configuration validation
- Runtime exposure via REST or Actuator

Get started:
- xref:getting-started.adoc[Getting Started]
- xref:runtime-exposure.adoc[Expose at Runtime]
- xref:ide-integration.adoc[IDE Integration]
- xref:schema-details.adoc[Schema Details]

Highlights
- Generate JSON Schema for configuration properties
- Jakarta Bean Validation support
- Spring Boot 3.x, Java 17+
- REST/Actuator endpoints, test utilities, CI/CD validation

Related reading:
xref:https://themightyprogrammer.dev/article/2ways-spring-configuration[Spring Boot Config Documentation, Two Ways With IntelliJ IDEA]

== Whatâ€™s next?
- New to the project? Start with xref:getting-started.adoc[Getting Started].
- Want to serve the schema at runtime? See xref:runtime-exposure.adoc[Expose at Runtime].
- Need editor assistance? Go to xref:ide-integration.adoc[IDE Integration].
- Curious about schema contents and validation? See xref:schema-details.adoc[Schema Details].
- Having issues? Check xref:troubleshooting.adoc[Troubleshooting].

== Prerequisites

- Java 17 or higher
- Spring Boot 3.x
- Maven or Gradle build system
- Configuration processor for property metadata generation:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
----

[#usage]
== Usage

=== Maven (using in unit tests)

Add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}</version>
    <scope>test</scope>
</dependency>
----

.SampleJsonSchemaGeneratorTests.java
[source,java]
----
@SpringBootTest
@Slf4j
class SampleJsonSchemaGeneratorTests {

    @Autowired
    private JsonSchemaService jsonSchemaService;

     @Test
    void generateJsonSchema() {

        var jsonConfigSchemaJson = jsonSchemaService.generateFullSchemaJson();
        var jsonConfigSchemaYaml = jsonSchemaService.generateFullSchemaYaml();
        log.info("Writing json schema");
        Files.writeString(Paths.get("config-schema.json"), jsonConfigSchemaJson, StandardCharsets.UTF_8);

        log.info("Writing yaml schema");
        Files.writeString(Paths.get("config-schema.yaml"), jsonConfigSchemaYaml, StandardCharsets.UTF_8);
    }
}
----

=== Using as REST API Endpoint

To expose the JSON schema via a REST endpoint (similar to Swagger API docs), first add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}</version>
</dependency>
----

.GenerateJsonSchema.java
[source,java]
----
@RestController
@Slf4j
public class GenerateJsonSchema {

    @Autowired
    private JsonSchemaService jsonSchemaService;

    @GetMapping("/config-schema")
    public String getConfigSchema() {
        return jsonSchemaService.generateFullSchemaJson();
    }

    @GetMapping("/config-schema.yaml")
    public String getConfigSchemaYaml() throws Exception {
        return jsonSchemaService.generateFullSchemaYaml();
    }
}
----

=== Using as Actuator Endpoint

To expose the JSON schema via an Actuator endpoint, first add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}</version>
</dependency>
----

==== In JSON format

.ConfigSchemaEndpoint.java
[source,java]
----
@Component
@Endpoint(id = "config-schema")
@RequiredArgsConstructor
public class ConfigSchemaEndpoint {

    private final JsonSchemaService jsonSchemaService;

    @ReadOperation
    public String schema() {
        return jsonSchemaService.generateFullSchemaJson();
    }
}
----

==== In YAML format

.ConfigSchemaYamlEndpoint.java
[source,java]
----
@Component
@Endpoint(id = "config-schema.yaml")
@RequiredArgsConstructor
public class ConfigSchemaYamlEndpoint {

    private final JsonSchemaService jsonSchemaService;

    @ReadOperation
    public String schema() throws Exception {
        return jsonSchemaService.generateFullSchemaYaml();
    }
}
----

[#editors]
== Using in editors

=== IDE Integration

==== IntelliJ IDEA and JetBrains IDEs

Add schema reference to the top of your YAML configuration

For testing purposes, you can find sample generic schema files here:

* xref:attachment$boot-generic-config.json[boot-generic-config.json]
* xref:attachment$boot-generic-config.yaml[boot-generic-config.yaml]

[source,yaml]
----
# Schema reference for JetBrains IDEs
$schema: "https://alexmond.github.io/spring-boot-config-json-schema-starter/current/_attachments/boot-generic-config.json"

# Application properties
spring:
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password: password
----

Examples:

[.thumb]
image::Intellij1.png[scaledwidth=75%]
[.thumb]
image::Intellij2.png[scaledwidth=75%]

=== Usage in Visual Studio Code

Add schema reference using YAML language server directive (requires YAML Language Support by Red Hat extension):

[source,yaml]
----
# yaml-language-server: $schema=https://alexmond.github.io/spring-boot-config-json-schema-starter/current/_attachments/boot-generic-config.yaml

spring:
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password: password
----

Examples:

[.thumb]
image::vcs1.png[scaledwidth=75%]
[.thumb]
image::vcs2.png[scaledwidth=75%]

[configuration-properties]
== Configuration Properties

Below you can find a list of configuration properties.

include::partial$_configprops.adoc[]