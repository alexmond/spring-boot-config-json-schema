[#_spring_boot_config_json_schema_generator]
== Spring Boot Config JSON Schema Generator
Alex Mondshain <alex.mondshain@gmail.com>
2014-09-09


A Spring Boot starter that generates JSON Schema documentation from your application's @ConfigurationProperties classes and Spring Boot configuration metadata.
The generated schemas enable configuration validation and autocompletion in popular IDEs and CI/CD pipelines.

[#introduction]
== Introduction

A Spring Boot starter library uses Spring Context to process @ConfigurationProperties annotated classes and relevant properties from Spring Boot's configuration metadata (spring-configuration-metadata.json) to generate JSON Schema.
The generated schema can be used by compatible editors for configuration validation and assistance outside the Java project, as well as for configuration validation during CI/CD pipelines.

A good article on this subject: xref:https://themightyprogrammer.dev/article/2ways-spring-configuration[Springboot Config Documentation, Two Ways With IntelliJ IDEA]

== Features

=== Core Capabilities

- Automatic JSON Schema generation from @ConfigurationProperties classes
- Support for Jakarta Bean Validation (JSR-380) annotations
- Full Spring Boot 3.x compatibility
- Java 17+ runtime support

=== Integration Support  

- Built-in REST API endpoint for schema access
- IDE integration (IntelliJ IDEA, VS Code)
- Unit test helpers for schema generation
- CI/CD pipeline validation

=== Schema Features

- Nested property support
- Complex type handling
- Custom validation rules
- Comprehensive property metadata

== Prerequisites

- Java 17 or higher
- Spring Boot 3.x
- Maven or Gradle build system
- Configuration processor for property metadata generation:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
----

[#usage]
== Usage

=== Maven (using in unit tests)

Add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}
</version>
    <scope>test</scope>
</dependency>
----

.SampleJsonSchemaGeneratorTests.java
[source,java]
----
@SpringBootTest
@Slf4j
class SampleJsonSchemaGeneratorTests {

    @Autowired
    private JsonSchemaService jsonSchemaService;

     @Test
    void generateJsonSchema() {

        var jsonConfigSchemaJson = jsonSchemaService.generateFullSchemaJson();
        var jsonConfigSchemaYaml = jsonSchemaService.generateFullSchemaYaml();
        log.info("Writing json schema");
        Files.writeString(Paths.get("config-schema.json"), jsonConfigSchemaJson, StandardCharsets.UTF_8);

        log.info("Writing yaml schema");
        Files.writeString(Paths.get("config-schema.yaml"), jsonConfigSchemaYaml, StandardCharsets.UTF_8);
    }
}
----

=== Using as REST API Endpoint

To expose the JSON schema via a REST endpoint (similar to Swagger API docs), first add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}
</version>
</dependency>
----

.GenerateJsonSchema.java
[source,java]
----
@RestController
@Slf4j
public class GenerateJsonSchema {

    @Autowired
    private JsonSchemaService jsonSchemaService;

    @GetMapping("/config-schema")
    public String getConfigSchema() {
        return jsonSchemaService.generateFullSchemaJson();
    }

    @GetMapping("/config-schema.yaml")
    public String getConfigSchemaYaml() throws Exception {
        return jsonSchemaService.generateFullSchemaYaml();
    }
}
----

=== Using as Actuator Endpoint

To expose the JSON schema via an Actuator endpoint, first add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{page-component-version}
</version>
</dependency>
----

==== In JSON format

.ConfigSchemaEndpoint.java
[source,java]
----
@Component
@Endpoint(id = "config-schema")
@RequiredArgsConstructor
public class ConfigSchemaEndpoint {

    private final JsonSchemaService jsonSchemaService;

    @ReadOperation
    public String schema() {
        return jsonSchemaService.generateFullSchemaJson();
    }
}
----

==== In YAML format

.ConfigSchemaYamlEndpoint.java
[source,java]
----
@Component
@Endpoint(id = "config-schema.yaml")
@RequiredArgsConstructor
public class ConfigSchemaYamlEndpoint {

    private final JsonSchemaService jsonSchemaService;

    @ReadOperation
    public String schema() throws Exception {
        return jsonSchemaService.generateFullSchemaYaml();
    }
}
----

[#editors]
== Using in editors

=== IDE Integration

==== IntelliJ IDEA and JetBrains IDEs

Add schema reference to the top of your YAML configuration

For testing purposes, you can find sample generic schema files here:

* xref:attachment$boot-generic-config.json[boot-generic-config.json]
* xref:attachment$boot-generic-config.yaml[boot-generic-config.yaml]

[source,yaml]
----
# Schema reference for JetBrains IDEs
$schema: "https://alexmond.github.io/spring-boot-config-json-schema/sample/boot-generic-config.json"

# Application properties
spring:
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password: password
----

Examples:

[.thumb]
image::Intellij1.png[scaledwidth=75%]
[.thumb]
image::Intellij2.png[scaledwidth=75%]

=== Usage in Visual Studio Code

Add schema reference using YAML language server directive (requires YAML Language Support by Red Hat extension):

[source,yaml]
----
# yaml-language-server: $schema=https://alexmond.github.io/spring-boot-config-json-schema/sample/boot-generic-config.json

spring:
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password: password
----

Examples:

[.thumb]
image::vcs1.png[scaledwidth=75%]
[.thumb]
image::vcs2.png[scaledwidth=75%]

[configuration-properties]
== Configuration Properties

Below you can find a list of configuration properties.

include::partial$_configprops.adoc[]