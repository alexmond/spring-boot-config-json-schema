= Spring Boot Config JSON Schema Generator
Alex Mondshain <alex.mondshaing@gmail.com>
2014-09-09
:revnumber: {project-version}
:example-caption!:
ifndef::imagesdir[:imagesdir: images]
ifndef::pages[:pages: pages]
ifndef::partials[:partials: partials]

A Spring Boot starter library that automatically generates JSON Schema documentation for your application's configuration properties.
It simplifies the process of documenting and validating configuration by generating JSON Schema from your Spring Boot configuration classes.

[#introduction]
== Introduction

A Spring Boot starter library uses Spring Context to process @ConfigurationProperties annotated classes and relevant properties from Spring Boot's configuration metadata (spring-configuration-metadata.json) to generate JSON Schema.
The generated schema can be used by compatible editors for configuration validation and assistance outside of the Java project, as well as for configuration validation during CI/CD pipelines.

== Key Features

- Automatic JSON Schema generation from @ConfigurationProperties classes
- Support for validation annotations and property constraints (JSR-380/Bean Validation)
- Full compatibility with Spring Boot 3.x
- Java 17+ runtime support
- Built-in REST API endpoint for schema access
- Unit test integration for schema generation
- IDE integration support for configuration assistance
- Support for nested properties and complex types
- Custom validation rule support

== Prerequisites

- Java 17 or higher
- Spring Boot 3.x
- Maven or Gradle build system
- Configuration processor for property metadata generation:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
----

[#usage]
== Usage

=== Maven (use in unit tests)

Add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{project-version}</version>
    <scope>test</scope>
</dependency>
----

.SampleJsonSchemaGeneratorTests.java
[source,java]
----
@SpringBootTest
@Slf4j
class SampleJsonSchemaGeneratorTests {

    @Autowired
    private JsonSchemaService jsonSchemaService;

    @Test
    void generateJsonSchema() throws Exception {

        String jsonConfigSchema;
        jsonConfigSchema = jsonSchemaService.generateFullSchema();

        ObjectMapper jsonMapper = new ObjectMapper();
        ObjectWriter jsonWriter = jsonMapper.writer(new DefaultPrettyPrinter());
        log.info("Writing json schema");
        jsonWriter.writeValue(Paths.get("sample-schema.json").toFile(),
            jsonMapper.readTree(jsonConfigSchema));

        ObjectMapper yamlMapper = new ObjectMapper(new YAMLFactory());
        ObjectWriter yamlWriter = yamlMapper.writer(new DefaultPrettyPrinter());
        log.info("Writing yaml schema");
        yamlWriter.writeValue(Paths.get("sample-schema.yaml").toFile(),
            jsonMapper.readTree(jsonConfigSchema));
    }

}
----

=== Using as REST API Endpoint

To expose the JSON schema via a REST endpoint (similar to Swagger API docs), first add the following dependency to your `pom.xml`:

[source,xml,subs=+attributes]
----
<dependency>
    <groupId>org.alexmond</groupId>
    <artifactId>spring-boot-config-json-schema-starter</artifactId>
    <version>{project-version}</version>
</dependency>
----

.GenerateJsonSchema.java
[source,java]
----
@RestController
@Slf4j
public class GenerateJsonSchema {

    @Autowired
    private JsonSchemaService jsonSchemaService;

    @GetMapping("/config-schema")
    public String getConfigSchema() throws Exception {
        return jsonSchemaService.generateFullSchema();
    }

}
----

[#editors]
== Using in editors

=== Usage in IntelliJ IDEA and other JetBrains IDEs

Add schema reference to your YAML configuration file:

[source,yaml]
----
$schema: "https://alexmond.github.io/spring-boot-config-json-schema/sample/boot-generic-config.json"

spring:
  datasource:
    url:
----

Examples:

[.thumb]
image::Intellij1.png[scaledwidth=75%]
[.thumb]
image::Intellij2.png[scaledwidth=75%]

=== Usage in Visual Studio Code

Add schema reference using YAML language server directive (requires YAML Language Support by Red Hat extension):

[source,yaml]
----
# yaml-language-server: $schema=https://alexmond.github.io/spring-boot-config-json-schema/sample/boot-generic-config.json

spring:
  datasource:
    name:
----

Examples:

[.thumb]
image::vcs1.png[scaledwidth=75%]
[.thumb]
image::vcs2.png[scaledwidth=75%]

[configuration-properties]
== Configuration Properties

Below you can find a list of configuration properties.

include::{partials}/_configprops.adoc[]